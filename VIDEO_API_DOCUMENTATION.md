## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã `UserStatusGuard` –∏ —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

---

## üìπ –ö–æ—Ä–æ—Ç–∫–∏–µ –≤–∏–¥–µ–æ (–¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

### 1. GET /video/short-videos/feed - –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–µ–Ω—Ç—ã –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –ª–µ–Ω—Ç—É –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

- `telegramId` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `limit` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, 1-50, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ
- `offset` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, ‚â•0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0) - –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–ó–∞–ø—Ä–æ—Å:**

```http
GET /video/short-videos/feed?telegramId=123456789&limit=10&offset=0

```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": {
		"videos": [
			{
				"id": 1,
				"createdAt": "2024-01-15T10:30:00.000Z",
				"updatedAt": "2024-01-15T10:30:00.000Z",
				"key": "psychologist_videos/uuid-video.mp4",
				"telegramId": "psychologist_123",
				"title": "–°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º",
				"description": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º",
				"isPublished": true,
				"likesCount": 42,
				"viewsCount": 156,
				"url": "https://s3.amazonaws.com/bucket/psychologist_videos/uuid-video.mp4?signature=...",
				"psychologist": {
					"id": 1,
					"name": "–ê–Ω–Ω–∞ –ü—Å–∏—Ö–æ–ª–æ–≥",
					"about": "–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥ —Å 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º"
				}
			}
		],
		"total": 25
	},
	"message": "–õ–µ–Ω—Ç–∞ –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ –ø–æ–ª—É—á–µ–Ω–∞"
}
```

### 2. POST /video/short-videos/:videoId/like - –õ–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –ª–∞–π–∫ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤–∏–¥–µ–æ (toggle-—Å–∏—Å—Ç–µ–º–∞).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**

- `videoId` (number) - ID –≤–∏–¥–µ–æ

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
	"telegramId": "123456789",
	"videoId": 1
}
```

**–ó–∞–ø—Ä–æ—Å:**

```http
POST /video/short-videos/1/like
Content-Type: application/json
Authorization: Bearer <token>

{
  "telegramId": "123456789",
  "videoId": 1
}
```

**–û—Ç–≤–µ—Ç (–ª–∞–π–∫ –¥–æ–±–∞–≤–ª–µ–Ω):**

```json
{
	"success": true,
	"data": {
		"isLiked": true,
		"likesCount": 43
	},
	"message": "–í–∏–¥–µ–æ –ª–∞–π–∫–Ω—É—Ç–æ"
}
```

**–û—Ç–≤–µ—Ç (–ª–∞–π–∫ —É–±—Ä–∞–Ω):**

```json
{
	"success": true,
	"data": {
		"isLiked": false,
		"likesCount": 42
	},
	"message": "–õ–∞–π–∫ —É–±—Ä–∞–Ω"
}
```

### 3. POST /video/short-videos/:videoId/view - –£—á–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤–∏–¥–µ–æ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**

- `videoId` (number) - ID –≤–∏–¥–µ–æ

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
	"telegramId": "123456789",
	"videoId": 1
}
```

**–ó–∞–ø—Ä–æ—Å:**

```http
POST /video/short-videos/1/view
Content-Type: application/json
Authorization: Bearer <token>

{
  "telegramId": "123456789",
  "videoId": 1
}
```

**–û—Ç–≤–µ—Ç (–ø–µ—Ä–≤—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä):**

```json
{
	"success": true,
	"data": {
		"viewsCount": 157
	},
	"message": "–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—Å—á–∏—Ç–∞–Ω"
}
```

**–û—Ç–≤–µ—Ç (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä):**

```json
{
	"success": true,
	"data": {
		"viewsCount": 156
	},
	"message": "–ü—Ä–æ—Å–º–æ—Ç—Ä —É–∂–µ –∑–∞—Å—á–∏—Ç–∞–Ω"
}
```

---

## üé• –û–±—ã—á–Ω—ã–µ –≤–∏–¥–µ–æ (–¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–æ–≤)

### 4. POST /video/upload - –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –≤ –æ–±–ª–∞–∫–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ—Ñ–∞–π–ª –≤ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–ø–µ—Ä–≤—ã–π —ç—Ç–∞–ø –∑–∞–≥—Ä—É–∑–∫–∏).

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (multipart/form-data):**

- `video` (file, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - –í–∏–¥–µ–æ—Ñ–∞–π–ª
- `telegramId` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 100MB
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: MP4, AVI, MOV, WMV, WebM

**–ó–∞–ø—Ä–æ—Å:**

```http
POST /video/upload
Content-Type: multipart/form-data
Authorization: Bearer <psychologist_token>

FormData:
- video: <file>
- telegramId: "psychologist_123"
```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": {
		"videoId": 0,
		"key": "psychologist_videos/uuid-video.mp4"
	},
	"message": "–í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –≤ –æ–±–ª–∞–∫–æ"
}
```

### 5. POST /video/save - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–≤—Ç–æ—Ä–æ–π —ç—Ç–∞–ø –∑–∞–≥—Ä—É–∑–∫–∏).

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
	"key": "psychologist_videos/uuid-video.mp4",
	"telegramId": "psychologist_123",
	"title": "–°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º",
	"description": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º"
}
```

**–ó–∞–ø—Ä–æ—Å:**

```http
POST /video/save
Content-Type: application/json
Authorization: Bearer <psychologist_token>

{
  "key": "psychologist_videos/uuid-video.mp4",
  "telegramId": "psychologist_123",
  "title": "–°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º",
  "description": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º"
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": {
		"videoId": 1,
		"key": "psychologist_videos/uuid-video.mp4"
	},
	"message": "–í–∏–¥–µ–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ"
}
```

### 6. PATCH /video/:id - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û–±–Ω–æ–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –≤–∏–¥–µ–æ.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**

- `id` (number) - ID –≤–∏–¥–µ–æ

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

- `telegramId` (string) - ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
	"title": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
	"description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
	"isPublished": true
}
```

**–ó–∞–ø—Ä–æ—Å:**

```http
PATCH /video/1?telegramId=psychologist_123
Content-Type: application/json
Authorization: Bearer <psychologist_token>

{
  "title": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
  "description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
  "isPublished": true
}
```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": {
		"id": 1,
		"createdAt": "2024-01-15T10:30:00.000Z",
		"updatedAt": "2024-01-15T11:00:00.000Z",
		"key": "psychologist_videos/uuid-video.mp4",
		"telegramId": "psychologist_123",
		"title": "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",
		"description": "–ù–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ",
		"isPublished": true,
		"likesCount": 42,
		"viewsCount": 156,
		"url": "https://s3.amazonaws.com/bucket/psychologist_videos/uuid-video.mp4?signature=...",
		"psychologist": {
			"id": 1,
			"name": "–ê–Ω–Ω–∞ –ü—Å–∏—Ö–æ–ª–æ–≥",
			"about": "–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥ —Å 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º"
		}
	},
	"message": "–í–∏–¥–µ–æ –æ–±–Ω–æ–≤–ª–µ–Ω–æ"
}
```

### 7. DELETE /video/:id - –£–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–¥–∞–ª—è–µ—Ç –≤–∏–¥–µ–æ –∏–∑ –æ–±–ª–∞–∫–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**

- `id` (number) - ID –≤–∏–¥–µ–æ

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

- `telegramId` (string) - ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞

**–ó–∞–ø—Ä–æ—Å:**

```http
DELETE /video/1?telegramId=psychologist_123
Authorization: Bearer <psychologist_token>
```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": null,
	"message": "–í–∏–¥–µ–æ —É–¥–∞–ª–µ–Ω–æ"
}
```

### 8. GET /video/my - –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏–¥–µ–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∏–¥–µ–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

- `telegramId` (string, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π) - ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞
- `limit` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, 1-50, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ
- `offset` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, ‚â•0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0) - –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

**–ó–∞–ø—Ä–æ—Å:**

```http
GET /video/my?telegramId=psychologist_123&limit=10&offset=0
Authorization: Bearer <psychologist_token>
```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": {
		"videos": [
			{
				"id": 1,
				"createdAt": "2024-01-15T10:30:00.000Z",
				"updatedAt": "2024-01-15T10:30:00.000Z",
				"key": "psychologist_videos/uuid-video.mp4",
				"telegramId": "psychologist_123",
				"title": "–°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º",
				"description": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º",
				"isPublished": true,
				"likesCount": 42,
				"viewsCount": 156,
				"url": "https://s3.amazonaws.com/bucket/psychologist_videos/uuid-video.mp4?signature=..."
			}
		],
		"total": 5
	},
	"message": "–í–∏–¥–µ–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∞ –ø–æ–ª—É—á–µ–Ω—ã"
}
```

### 9. GET /video/public - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–π –ª–µ–Ω—Ç—ã –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—É—é –ª–µ–Ω—Ç—É –≤—Å–µ—Ö –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –≤–∏–¥–µ–æ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–∏—Å–∫–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

- `limit` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, 1-50, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10) - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ
- `offset` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, ‚â•0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0) - –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- `search` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π) - –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

**–ó–∞–ø—Ä–æ—Å:**

```http
GET /video/public?limit=10&offset=0&search=–æ—Ç–Ω–æ—à–µ–Ω–∏—è
Authorization: Bearer <token>
```

**–û—Ç–≤–µ—Ç:**

```json
{
	"success": true,
	"data": {
		"videos": [
			{
				"id": 1,
				"createdAt": "2024-01-15T10:30:00.000Z",
				"updatedAt": "2024-01-15T10:30:00.000Z",
				"key": "psychologist_videos/uuid-video.mp4",
				"telegramId": "psychologist_123",
				"title": "–°–æ–≤–µ—Ç—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º",
				"description": "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—â–∞—Ç—å—Å—è —Å –ø–∞—Ä—Ç–Ω–µ—Ä–æ–º",
				"isPublished": true,
				"likesCount": 42,
				"viewsCount": 156,
				"url": "https://s3.amazonaws.com/bucket/psychologist_videos/uuid-video.mp4?signature=...",
				"psychologist": {
					"id": 1,
					"name": "–ê–Ω–Ω–∞ –ü—Å–∏—Ö–æ–ª–æ–≥",
					"about": "–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Å–∏—Ö–æ–ª–æ–≥ —Å 10-–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º"
				}
			}
		],
		"total": 25
	},
	"message": "–ü—É–±–ª–∏—á–Ω–∞—è –ª–µ–Ω—Ç–∞ –≤–∏–¥–µ–æ –ø–æ–ª—É—á–µ–Ω–∞"
}
```

### 10. POST /video/:id/like - –õ–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ –æ–±—ã—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –ª–∞–π–∫ –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ (toggle-—Å–∏—Å—Ç–µ–º–∞).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**

- `id` (number) - ID –≤–∏–¥–µ–æ

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
	"userId": "123456789"
}
```

**–ó–∞–ø—Ä–æ—Å:**

```http
POST /video/1/like
Content-Type: application/json
Authorization: Bearer <token>

{
  "userId": "123456789"
}
```

**–û—Ç–≤–µ—Ç (–ª–∞–π–∫ –¥–æ–±–∞–≤–ª–µ–Ω):**

```json
{
	"success": true,
	"data": {
		"isLiked": true,
		"likesCount": 43
	},
	"message": "–õ–∞–π–∫ –æ–±–Ω–æ–≤–ª–µ–Ω"
}
```

**–û—Ç–≤–µ—Ç (–ª–∞–π–∫ —É–±—Ä–∞–Ω):**

```json
{
	"success": true,
	"data": {
		"isLiked": false,
		"likesCount": 42
	},
	"message": "–õ–∞–π–∫ –æ–±–Ω–æ–≤–ª–µ–Ω"
}
```

### 11. POST /video/:id/view - –£—á–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ–±—ã—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ

**–û–ø–∏—Å–∞–Ω–∏–µ:** –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ–±—ã—á–Ω–æ–≥–æ –≤–∏–¥–µ–æ (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏:**

- `id` (number) - ID –≤–∏–¥–µ–æ

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
	"userId": "123456789"
}
```

**–ó–∞–ø—Ä–æ—Å:**

```http
POST /video/1/view
Content-Type: application/json
Authorization: Bearer <token>

{
  "userId": "123456789"
}
```

**–û—Ç–≤–µ—Ç (–ø–µ—Ä–≤—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä):**

```json
{
	"success": true,
	"data": {
		"viewsCount": 157
	},
	"message": "–ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—Å—á–∏—Ç–∞–Ω"
}
```

**–û—Ç–≤–µ—Ç (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä):**

```json
{
	"success": true,
	"data": {
		"viewsCount": 156
	},
	"message": "–ü—Ä–æ—Å–º–æ—Ç—Ä —É–∂–µ –∑–∞—Å—á–∏—Ç–∞–Ω"
}
```

---

## üìã DTO –°—Ö–µ–º—ã

### GetShortVideosDto

```typescript
{
  telegramId: string;    // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  limit?: number;        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ (1-50, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
  offset?: number;       // –°–º–µ—â–µ–Ω–∏–µ (‚â•0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
}
```

### LikeShortVideoDto

```typescript
{
	telegramId: string // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
	videoId: number // ID –≤–∏–¥–µ–æ
}
```

### ViewShortVideoDto

```typescript
{
	telegramId: string // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
	videoId: number // ID –≤–∏–¥–µ–æ
}
```

### GetMyVideosDto

```typescript
{
  telegramId: string;    // ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞
  limit?: number;        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ (1-50, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
  offset?: number;       // –°–º–µ—â–µ–Ω–∏–µ (‚â•0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
}
```

### GetPublicVideosDto

```typescript
{
  limit?: number;        // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ (1-50, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
  offset?: number;       // –°–º–µ—â–µ–Ω–∏–µ (‚â•0, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0)
  search?: string;       // –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
}
```

### UploadVideoDto

```typescript
{
	telegramId: string // ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞
}
```

### SaveVideoDto

```typescript
{
  key: string;           // –ö–ª—é—á —Ñ–∞–π–ª–∞ –≤ –æ–±–ª–∞–∫–µ
  telegramId: string;    // ID –ø—Å–∏—Ö–æ–ª–æ–≥–∞
  title?: string;        // –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ
  description?: string;  // –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ
}
```

### UpdateVideoDto

```typescript
{
  title?: string;        // –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ
  description?: string;  // –û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ
  isPublished?: boolean; // –°—Ç–∞—Ç—É—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
}
```

### LikeVideoDto

```typescript
{
	userId: string // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```

### ViewVideoDto

```typescript
{
	userId: string // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
}
```

---

## üö® –ö–æ–¥—ã –æ—à–∏–±–æ–∫

### 400 Bad Request

```json
{
	"success": false,
	"message": "–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –≤–∏–¥–µ–æ. –†–∞–∑—Ä–µ—à–µ–Ω—ã: MP4, AVI, MOV, WMV, WebM"
}
```

```json
{
	"success": false,
	"message": "–†–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ—Ñ–∞–π–ª–∞ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å 100MB"
}
```

### 403 Forbidden

```json
{
	"success": false,
	"message": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω"
}
```

```json
{
	"success": false,
	"message": "–ü—Å–∏—Ö–æ–ª–æ–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω"
}
```

### 404 Not Found

```json
{
	"success": false,
	"message": "–í–∏–¥–µ–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ"
}
```

### 500 Internal Server Error

```json
{
	"success": false,
	"message": "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –≤–∏–¥–µ–æ"
}
```

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- Presigned URL –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ Redis –Ω–∞ 1 —á–∞—Å 50 –º–∏–Ω—É—Ç
- –ö–ª—é—á –∫–µ—à–∞: `video:${key}:url`

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤–∏–¥–µ–æ: 100MB
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: MP4, AVI, MOV, WMV, WebM
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–¥–µ–æ –≤ –∑–∞–ø—Ä–æ—Å–µ: 50

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã `UserStatusGuard`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ DTO

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è URL —á–µ—Ä–µ–∑ `Promise.all`
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î —Å `include` –¥–ª—è —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–î–≤—É—Ö—ç—Ç–∞–ø–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:** –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –¥–≤–∞ —ç—Ç–∞–ø–∞ - —Å–Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ –æ–±–ª–∞–∫–æ (`/upload`), –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (`/save`).

2. **Toggle-—Å–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤:** –õ–∞–π–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è - –µ—Å–ª–∏ –ª–∞–π–∫–∞ –Ω–µ—Ç, –æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è; –µ—Å–ª–∏ –µ—Å—Ç—å - —É–±–∏—Ä–∞–µ—Ç—Å—è.

3. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—ã:** –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –≤–∏–¥–µ–æ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.

4. **–ö–æ—Ä–æ—Ç–∫–∏–µ –≤–∏–¥–µ–æ:** –û—Ç–¥–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –≤–∏–¥–µ–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è TikTok-–ø–æ–¥–æ–±–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

5. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –≤–∞–ª–∏–¥–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `UserStatusGuard`.
